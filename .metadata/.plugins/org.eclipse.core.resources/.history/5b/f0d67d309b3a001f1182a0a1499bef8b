package com.example.boot07.controller;

import java.util.UUID;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.multipart.MultipartFile;
import org.springframework.web.bind.annotation.PostMapping;




@Controller
public class FileController {
	/*
	 * custom.properties 파일에 있는 파일 업로드 경로를 읽어와서 필드에 담는다
	 */
	@Value("${file.location}")
	private String fileLocation;
	
	@GetMapping("/file/uploadform")
	public String uploadform() {
		return "file/uploadform";
	}
	
	/*
	 * <input type="file" name="myFile"> 에 선택된 파일 데이터를 처리 하기 위해서는
	 * 
	 * MultipartFile myFile 로 매개변수를 선언하면 된다.(파라미터명과 매개변수명을 일치시킨다)
	 */
	@PostMapping("/file/upload")
	public String upload(String title, MultipartFile myFile) {
		//원본 파일명
		String orgFileNameString=myFile.getOriginalFilename();
		//파일의 크기
		long fileSize=myFile.getSize();
		//저장할 파일의 이름을 Universal Unique 한 ID 로 저장하기 위해
		String saveFileName=UUID.randomUUID().toString();
		
		return "file/upload";
	}
	
}
